## 概述

百度分类词库是百度输入法使用的二进制词库格式。

<https://shurufa.baidu.com/dict>

## 文件结构

### 头部信息 (0x00 - 0x90)

| 偏移量 | 大小  | 描述                 |
| ------ | ----- | -------------------- |
| 0x40   | 4字节 | 常规词条偏移地址     |
| 0x44   | 4字节 | 常规词条占用空间大小 |
| 0x50   | 4字节 | 英文词条偏移地址     |
| 0x54   | 4字节 | 英文词条占用空间大小 |
| 0x60   | 4字节 | 混合词条偏移地址     |
| 0x64   | 4字节 | 混合词条占用空间大小 |
| 0x70   | 4字节 | 常规词条数量         |
| 0x74   | 4字节 | 英文词条数量         |
| 0x78   | 4字节 | 混合词条数量         |

### 元信息 (0x90 - 0x350)

| 偏移量 | 大小    | 编码     | 描述     |
| ------ | ------- | -------- | -------- |
| 0x90   | 64字节  | UTF-16LE | 词库名称 |
| 0xD0   | 64字节  | UTF-16LE | 词库作者 |
| 0x110  | 64字节  | UTF-16LE | 示例词汇 |
| 0x150  | 512字节 | UTF-16LE | 词库描述 |

## 拼音编码系统

### 声母列表 (24个)
```
索引: 0-23
值: ["c", "d", "b", "f", "g", "h", "ch", "j", "k", "l", "m", "n",
     "", "p", "q", "r", "s", "t", "sh", "zh", "w", "x", "y", "z"]
```

### 韵母列表 (32个)
```
索引: 0-31
值: ["uang", "iang", "iong", "ang", "eng", "ian", "iao", "ing", "ong",
     "uai", "uan", "ai", "an", "ao", "ei", "en", "er", "ua", "ie", "in", "iu",
     "ou", "ia", "ue", "ui", "un", "uo", "a", "e", "i", "o", "u", "v"]
```

## 词条格式

### 1. 常规词条 (Chinese Entries)

每个常规词条的结构：
```
+--------+--------+--------+--------+--------+--------+
| 拼音长度| 词频值 | 声母1  | 韵母1  | 声母2  | 韵母2  |
| 2字节  | 2字节  | 1字节  | 1字节  | 1字节  | 1字节  |
+--------+--------+--------+--------+--------+--------+
| ...    | 词汇文本 (UTF-16LE编码)                      |
| 更多拼音| 拼音长度 * 2 字节                            |
+--------+----------------------------------------+
```

**特殊情况：**
- 当声母索引为 `0xff` 时，表示该字符为英文字符，韵母字段直接存储ASCII字符

### 2. 英文词条 (English Entries)

每个英文词条的结构：
```
+--------+--------+--------+--------+
| 长度   | 词频值 | 英文词汇 (ASCII)  |
| 2字节  | 2字节  | 长度 字节        |
+--------+--------+----------------+
```

### 3. 混合词条 (Mixed Entries)

每个混合词条的结构：
```
+--------+--------+--------+--------+--------+--------+
| 拼音长度| 词频值 | 保留字段| 词长度 | 编码文本| 词汇文本|
| 2字节  | 2字节  | 2字节  | 2字节  |UTF-16LE|UTF-16LE|
+--------+--------+--------+--------+--------+--------+
```

## 数据存储特点

1. **编码方式**:
   - 中文文本使用 UTF-16LE 编码
   - 英文文本使用 ASCII 编码
   - 所有数值使用小端序 (Little-Endian)
   - 常规词条也可能包含英文字符

2. **拼音压缩**:
   - 使用声母+韵母索引的方式压缩拼音存储
   - 每个拼音音节占用2字节（声母1字节+韵母1字节）

3. **词频信息**:
   - 待定

## 文件扩展名

- `.bdict` - 百度分类词库
- `.bcd` - 百度手机分类词库 (格式相同)
