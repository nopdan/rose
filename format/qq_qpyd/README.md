# QQ拼音分类词库（.qpyd）格式说明

---

## 1. 文件结构总览

```
+------------------+----------------------+
| 文件头部         | 0x00 - 0x44          |
+------------------+----------------------+
| 信息区           | infoOffset-infoSize   |
+------------------+----------------------+
| 压缩数据区       | zipOffset-zipSize     |
+------------------+----------------------+
```

---

## 2. 文件头部（0x00 - 0x44）

- 0x00: 8字节，魔数
- 0x18: 8字节，Windows FILETIME 时间戳
- 0x20: 8字节，重复的时间戳
- 0x28: 4字节，版本号
- 0x2C: 4字节，信息区偏移（infoOffset）
- 0x30: 4字节，信息区大小（infoSize）
- 0x38: 4字节，压缩数据区偏移（zipOffset）
- 0x3C: 4字节，压缩数据区大小（zipSize）
- 0x40: 4字节，解压后数据大小（unzipSize）
- 0x44: 4字节，词条数量（entryCount）

---

## 3. 信息区（infoOffset, infoSize）

- infoOffset 处起，长度 infoSize 字节，为词库描述信息，UTF-16LE 编码字符串。

---

## 4. 压缩数据区（zipOffset, zipSize）

- zlib 压缩，解压后为词条索引和词条数据。

### 4.1 词条索引区

- 每个词条 10 字节：
  - 2字节：编码长度、词长度（各1字节）
  - 4字节：未知，一般为 00 00 80 3F
  - 4字节：词条数据偏移（offset）

### 4.2 词条数据区

- 每个词条：
  - code：编码字符串，自带 ' 分隔符，UTF-8
  - word：词条内容，UTF-16LE

---

## 5. 时间戳说明

- 文件头部时间戳为 Windows FILETIME，需转换为标准时间。
